<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ - INOVATION GROUP</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-header">
            <i class="fas fa-user-plus"></i>
            <h1>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h1>
            <p>Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ù…Ù†ØµØªÙ†Ø§ ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ù…Ø¹ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„Ø´Ø­Ù†</p>
        </div>

        <div class="auth-body">
            <form id="registerForm">
                <div class="form-group">
                    <label for="name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" id="name" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required
                           oninput="this.value = this.value.replace(/[0-9]/g, '')">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="countryCode">Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
                        <select id="countryCode" class="form-control" required>
                            <option value="+20">ğŸ‡ªğŸ‡¬ Ù…ØµØ± (+20)</option>
                            <option value="+966">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (+966)</option>
                            <option value="+971">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª (+971)</option>
                            <option value="+965">ğŸ‡°ğŸ‡¼ Ø§Ù„ÙƒÙˆÙŠØª (+965)</option>
                            <option value="+974">ğŸ‡¶ğŸ‡¦ Ù‚Ø·Ø± (+974)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="phone" class="form-control" placeholder="1000000001" required
                               oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="password" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="nationality">Ø§Ù„Ø¬Ù†Ø³ÙŠØ©</label>
                        <input type="text" id="nationality" class="form-control" placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©" required>
                    </div>
                    <div class="form-group">
                        <label for="gender">Ø§Ù„Ù†ÙˆØ¹</label>
                        <select id="gender" class="form-control" required>
                            <option value="male">Ø°ÙƒØ±</option>
                            <option value="female">Ø£Ù†Ø«Ù‰</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="role">Ø§Ù„Ø¯ÙˆØ±</label>
                    <select id="role" class="form-control" required>
                        <option value="customer">Ø¹Ù…ÙŠÙ„</option>
                        <option value="driver">Ù…Ù†Ø¯ÙˆØ¨</option>
                    </select>
                </div>

                <div id="driverFields" class="driver-fields">
                    <div class="form-group">
                        <label for="vehicleType">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</label>
                        <input type="text" id="vehicleType" class="form-control" placeholder="Ù…Ø«Ø§Ù„: ÙØ§Ù† - Ù†Ù‚Ù„ ØµØºÙŠØ±">
                    </div>
                    <div class="form-group">
                        <label for="national_id">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</label>
                        <input type="text" id="national_id" class="form-control" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©">
                    </div>
                    <div class="form-group">
                        <label for="idPhoto">ØµÙˆØ±Ø© Ø§Ù„Ù‡ÙˆÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <input type="file" id="idPhoto" class="form-control">
                    </div>
                </div>

                <div class="company-link">
                    <a href="company-register.html">
                        <i class="fas fa-building"></i>
                        Ù‡Ù„ Ø£Ù†Øª Ø´Ø±ÙƒØ©ØŸ Ø³Ø¬Ù„ Ø´Ø±ÙƒØªÙƒ Ù…Ù† Ù‡Ù†Ø§
                    </a>
                </div>

                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i>
                    Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
                </button>
            </form>

            <div class="auth-links">
                <a href="login.html">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
            </div>

            <div class="back-home">
                <a href="index.html">
                    <i class="fas fa-arrow-right"></i>
                    Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
            </div>
        </div>
    </div>

    <script src="assets/app.js"></script>
    <script>
        // Show/hide driver fields based on role selection
        document.getElementById('role').addEventListener('change', function() {
            const driverFields = document.getElementById('driverFields');
            if(this.value === 'driver') {
                driverFields.style.display = 'block';
                // Make driver fields required
                document.getElementById('vehicleType').required = true;
                document.getElementById('national_id').required = true;
            } else {
                driverFields.style.display = 'none';
                // Remove required from driver fields
                document.getElementById('vehicleType').required = false;
                document.getElementById('national_id').required = false;
            }
        });

        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function() {
            UIHelper.formatPhoneInput(this);
        });

        // Password strength validation
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const strengthIndicator = document.getElementById('passwordStrength');
            
            if(!strengthIndicator) {
                const indicator = document.createElement('div');
                indicator.id = 'passwordStrength';
                indicator.style.fontSize = '0.8rem';
                indicator.style.marginTop = '0.5rem';
                this.parentNode.appendChild(indicator);
            }
            
            let strength = 'Ø¶Ø¹ÙŠÙØ©';
            let color = '#b91c1c';
            
            if(password.length >= 8) {
                strength = 'Ø¬ÙŠØ¯Ø©';
                color = '#f59e0b';
            }
            if(password.length >= 10 && /[0-9]/.test(password) && /[A-Za-z]/.test(password)) {
                strength = 'Ù‚ÙˆÙŠØ©';
                color = '#10b981';
            }
            
            strengthIndicator.textContent = `Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${strength}`;
            strengthIndicator.style.color = color;
        });

        // Form Submission
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const role = document.getElementById('role').value;
            const name = document.getElementById('name').value.trim();
            const country = document.getElementById('countryCode').value;
            const phone = document.getElementById('phone').value.trim();
            const password = document.getElementById('password').value;
            const nationality = document.getElementById('nationality').value.trim();
            const gender = document.getElementById('gender').value;
            
            let vehicleType = '';
            let nationalId = '';
            if(role === 'driver') {
                vehicleType = document.getElementById('vehicleType').value.trim();
                nationalId = document.getElementById('national_id').value.trim();
            }

            // Validate phone format
            if(!window.InovationApp.validatePhone(phone)) {
                UIHelper.showMessage('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ + ÙˆÙŠØªØ¨Ø¹Ù‡ 10-15 Ø±Ù‚Ù…');
                return;
            }

            // Validate password strength
            if(password.length < 6) {
                UIHelper.showMessage('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }

            const registerBtn = this.querySelector('button');
            const originalText = UIHelper.showLoading(registerBtn);

            const userData = {
                name,
                phone,
                password,
                role,
                vehicleType,
                nationality,
                gender
            };

            // Simulate API call
            setTimeout(() => {
                const result = window.InovationApp.register(userData);
                
                if(result.success) {
                    UIHelper.showMessage('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'success');
                    UIHelper.redirect('login.html', 2000);
                } else {
                    UIHelper.showMessage(result.message);
                    UIHelper.hideLoading(registerBtn, originalText);
                }
            }, 2000);
        });
    </script>
</body>
</html>